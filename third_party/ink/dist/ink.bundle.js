var Ot=(e,t)=>()=>(e&&(t=e(e=0)),t);import Ue from"ws";var tt,Bt=Ot(()=>{"use strict";tt=global;tt.WebSocket||=Ue;tt.window||=global;tt.self||=global;tt.window.__REACT_DEVTOOLS_COMPONENT_FILTERS__=[{type:1,value:7,isEnabled:!0},{type:2,value:"InternalApp",isEnabled:!0,isValid:!0},{type:2,value:"InternalAppContext",isEnabled:!0,isValid:!0},{type:2,value:"InternalStdoutContext",isEnabled:!0,isValid:!0},{type:2,value:"InternalStderrContext",isEnabled:!0,isValid:!0},{type:2,value:"InternalStdinContext",isEnabled:!0,isValid:!0},{type:2,value:"InternalFocusContext",isEnabled:!0,isValid:!0}]});var Ve={};import Lt from"react-devtools-core";var kt=Ot(()=>{"use strict";Bt();Lt.initialize();Lt.connectToDevTools()});import{Stream as Zr}from"node:stream";import dt from"node:process";import ue from"node:process";import ce from"react";import{throttle as fe}from"es-toolkit/compat";import Nt from"ansi-escapes";import G from"is-in-ci";import $r from"auto-bind";import Xr from"signal-exit";import zr from"patch-console";import{LegacyRoot as jr}from"react-reconciler/constants.js";import Jr from"yoga-layout";import Kr from"wrap-ansi";import $e from"node:process";import Xe from"react-reconciler";import{DefaultEventPriority as ze,NoEventPriority as Wt}from"react-reconciler/constants.js";import Pt from"yoga-layout";import{createContext as je}from"react";import Ie from"yoga-layout";import Ne from"widest-line";var _t=new Map,ve=e=>{if(e.length===0)return{width:0,height:0};let t=_t.get(e);if(t)return t;let r=Ne(e),o=e.split(`
`).length,i={width:r,height:o};return _t.set(e,i),i},ht=ve;import Oe from"wrap-ansi";import _e from"cli-truncate";var Rt={},Re=(e,t,r)=>{let o=e+String(t)+String(r),i=Rt[o];if(i)return i;let s=e;if(r==="wrap"&&(s=Oe(e,t,{trim:!1,hard:!0})),r.startsWith("truncate")){let n="end";r==="truncate-middle"&&(n="middle"),r==="truncate-start"&&(n="start"),s=_e(e,t,{position:n})}return Rt[o]=s,s},K=Re;var It=e=>{let t="";for(let r=0;r<e.childNodes.length;r++){let o=e.childNodes[r];if(o===void 0)continue;let i="";o.nodeName==="#text"?i=o.nodeValue:((o.nodeName==="ink-text"||o.nodeName==="ink-virtual-text")&&(i=It(o)),i.length>0&&typeof o.internal_transform=="function"&&(i=o.internal_transform(i,r))),t+=i}return t},Y=It;var Z=e=>{let t={nodeName:e,style:{},attributes:{},childNodes:[],parentNode:void 0,yogaNode:e==="ink-virtual-text"?void 0:Ie.Node.create(),internal_accessibility:{}};return e==="ink-text"&&t.yogaNode?.setMeasureFunc(De.bind(null,t)),t},q=(e,t)=>{t.parentNode&&U(t.parentNode,t),t.parentNode=e,e.childNodes.push(t),t.yogaNode&&e.yogaNode?.insertChild(t.yogaNode,e.yogaNode.getChildCount()),(e.nodeName==="ink-text"||e.nodeName==="ink-virtual-text")&&Q(e)},gt=(e,t,r)=>{t.parentNode&&U(t.parentNode,t),t.parentNode=e;let o=e.childNodes.indexOf(r);if(o>=0){e.childNodes.splice(o,0,t),t.yogaNode&&e.yogaNode?.insertChild(t.yogaNode,o);return}e.childNodes.push(t),t.yogaNode&&e.yogaNode?.insertChild(t.yogaNode,e.yogaNode.getChildCount()),(e.nodeName==="ink-text"||e.nodeName==="ink-virtual-text")&&Q(e)},U=(e,t)=>{t.yogaNode&&t.parentNode?.yogaNode?.removeChild(t.yogaNode),t.parentNode=void 0;let r=e.childNodes.indexOf(t);r>=0&&e.childNodes.splice(r,1),(e.nodeName==="ink-text"||e.nodeName==="ink-virtual-text")&&Q(e)},xt=(e,t,r)=>{if(t==="internal_accessibility"){e.internal_accessibility=r;return}e.attributes[t]=r},Et=(e,t)=>{e.style=t},Dt=e=>{let t={nodeName:"#text",nodeValue:e,yogaNode:void 0,parentNode:void 0,style:{}};return V(t,e),t},De=function(e,t){let r=e.nodeName==="#text"?e.nodeValue:Y(e),o=ht(r);if(o.width<=t||o.width>=1&&t>0&&t<1)return o;let i=e.style?.textWrap??"wrap",s=K(r,t,i);return ht(s)},Ft=e=>{if(e?.parentNode)return e.yogaNode??Ft(e.parentNode)},Q=e=>{Ft(e)?.markDirty()},V=(e,t)=>{typeof t!="string"&&(t=String(t)),e.nodeValue=t,Q(e)};import u from"yoga-layout";var Be=(e,t)=>{"position"in t&&e.setPositionType(t.position==="absolute"?u.POSITION_TYPE_ABSOLUTE:u.POSITION_TYPE_RELATIVE)},Le=(e,t)=>{"margin"in t&&e.setMargin(u.EDGE_ALL,t.margin??0),"marginX"in t&&e.setMargin(u.EDGE_HORIZONTAL,t.marginX??0),"marginY"in t&&e.setMargin(u.EDGE_VERTICAL,t.marginY??0),"marginLeft"in t&&e.setMargin(u.EDGE_START,t.marginLeft||0),"marginRight"in t&&e.setMargin(u.EDGE_END,t.marginRight||0),"marginTop"in t&&e.setMargin(u.EDGE_TOP,t.marginTop||0),"marginBottom"in t&&e.setMargin(u.EDGE_BOTTOM,t.marginBottom||0)},ke=(e,t)=>{"padding"in t&&e.setPadding(u.EDGE_ALL,t.padding??0),"paddingX"in t&&e.setPadding(u.EDGE_HORIZONTAL,t.paddingX??0),"paddingY"in t&&e.setPadding(u.EDGE_VERTICAL,t.paddingY??0),"paddingLeft"in t&&e.setPadding(u.EDGE_LEFT,t.paddingLeft||0),"paddingRight"in t&&e.setPadding(u.EDGE_RIGHT,t.paddingRight||0),"paddingTop"in t&&e.setPadding(u.EDGE_TOP,t.paddingTop||0),"paddingBottom"in t&&e.setPadding(u.EDGE_BOTTOM,t.paddingBottom||0)},Pe=(e,t)=>{"flexGrow"in t&&e.setFlexGrow(t.flexGrow??0),"flexShrink"in t&&e.setFlexShrink(typeof t.flexShrink=="number"?t.flexShrink:1),"flexWrap"in t&&(t.flexWrap==="nowrap"&&e.setFlexWrap(u.WRAP_NO_WRAP),t.flexWrap==="wrap"&&e.setFlexWrap(u.WRAP_WRAP),t.flexWrap==="wrap-reverse"&&e.setFlexWrap(u.WRAP_WRAP_REVERSE)),"flexDirection"in t&&(t.flexDirection==="row"&&e.setFlexDirection(u.FLEX_DIRECTION_ROW),t.flexDirection==="row-reverse"&&e.setFlexDirection(u.FLEX_DIRECTION_ROW_REVERSE),t.flexDirection==="column"&&e.setFlexDirection(u.FLEX_DIRECTION_COLUMN),t.flexDirection==="column-reverse"&&e.setFlexDirection(u.FLEX_DIRECTION_COLUMN_REVERSE)),"flexBasis"in t&&(typeof t.flexBasis=="number"?e.setFlexBasis(t.flexBasis):typeof t.flexBasis=="string"?e.setFlexBasisPercent(Number.parseInt(t.flexBasis,10)):e.setFlexBasis(Number.NaN)),"alignItems"in t&&((t.alignItems==="stretch"||!t.alignItems)&&e.setAlignItems(u.ALIGN_STRETCH),t.alignItems==="flex-start"&&e.setAlignItems(u.ALIGN_FLEX_START),t.alignItems==="center"&&e.setAlignItems(u.ALIGN_CENTER),t.alignItems==="flex-end"&&e.setAlignItems(u.ALIGN_FLEX_END)),"alignSelf"in t&&((t.alignSelf==="auto"||!t.alignSelf)&&e.setAlignSelf(u.ALIGN_AUTO),t.alignSelf==="flex-start"&&e.setAlignSelf(u.ALIGN_FLEX_START),t.alignSelf==="center"&&e.setAlignSelf(u.ALIGN_CENTER),t.alignSelf==="flex-end"&&e.setAlignSelf(u.ALIGN_FLEX_END)),"justifyContent"in t&&((t.justifyContent==="flex-start"||!t.justifyContent)&&e.setJustifyContent(u.JUSTIFY_FLEX_START),t.justifyContent==="center"&&e.setJustifyContent(u.JUSTIFY_CENTER),t.justifyContent==="flex-end"&&e.setJustifyContent(u.JUSTIFY_FLEX_END),t.justifyContent==="space-between"&&e.setJustifyContent(u.JUSTIFY_SPACE_BETWEEN),t.justifyContent==="space-around"&&e.setJustifyContent(u.JUSTIFY_SPACE_AROUND),t.justifyContent==="space-evenly"&&e.setJustifyContent(u.JUSTIFY_SPACE_EVENLY))},Ae=(e,t)=>{"width"in t&&(typeof t.width=="number"?e.setWidth(t.width):typeof t.width=="string"?e.setWidthPercent(Number.parseInt(t.width,10)):e.setWidthAuto()),"height"in t&&(typeof t.height=="number"?e.setHeight(t.height):typeof t.height=="string"?e.setHeightPercent(Number.parseInt(t.height,10)):e.setHeightAuto()),"minWidth"in t&&(typeof t.minWidth=="string"?e.setMinWidthPercent(Number.parseInt(t.minWidth,10)):e.setMinWidth(t.minWidth??0)),"minHeight"in t&&(typeof t.minHeight=="string"?e.setMinHeightPercent(Number.parseInt(t.minHeight,10)):e.setMinHeight(t.minHeight??0)),"maxWidth"in t&&(typeof t.maxWidth=="string"?e.setMaxWidthPercent(Number.parseInt(t.maxWidth,10)):e.setMaxWidth(t.maxWidth)),"maxHeight"in t&&(typeof t.maxHeight=="string"?e.setMaxHeightPercent(Number.parseInt(t.maxHeight,10)):e.setMaxHeight(t.maxHeight))},Me=(e,t)=>{"display"in t&&e.setDisplay(t.display==="flex"?u.DISPLAY_FLEX:u.DISPLAY_NONE)},We=(e,t)=>{if("borderStyle"in t){let r=t.borderStyle?1:0;t.borderTop!==!1&&e.setBorder(u.EDGE_TOP,r),t.borderBottom!==!1&&e.setBorder(u.EDGE_BOTTOM,r),t.borderLeft!==!1&&e.setBorder(u.EDGE_LEFT,r),t.borderRight!==!1&&e.setBorder(u.EDGE_RIGHT,r)}},He=(e,t)=>{"gap"in t&&e.setGap(u.GUTTER_ALL,t.gap??0),"columnGap"in t&&e.setGap(u.GUTTER_COLUMN,t.columnGap??0),"rowGap"in t&&e.setGap(u.GUTTER_ROW,t.rowGap??0)},Ge=(e,t)=>{let r=t.overflow??"visible",o=t.overflowX??r,i=t.overflowY??r;(o==="scroll"||i==="scroll")&&e.setOverflow(u.OVERFLOW_SCROLL)},Ye=(e,t={})=>{Be(e,t),Le(e,t),ke(e,t),Pe(e,t),Ae(e,t),Me(e,t),We(e,t),He(e,t),Ge(e,t)},bt=Ye;if($e.env.DEV==="true")try{await Promise.resolve().then(()=>(kt(),Ve))}catch(e){if(e.code==="ERR_MODULE_NOT_FOUND")console.warn(`
The environment variable DEV is set to true, so Ink tried to import \`react-devtools-core\`,
but this failed as it was not installed. Debugging with React Devtools requires it.

To install use this command:

$ npm install --save-dev react-devtools-core
				`.trim()+`
`);else throw e}var At=(e,t)=>{if(e===t)return;if(!e)return t;let r={},o=!1;for(let i of Object.keys(e))(t?!Object.hasOwn(t,i):!0)&&(r[i]=void 0,o=!0);if(t)for(let i of Object.keys(t))t[i]!==e[i]&&(r[i]=t[i],o=!0);return o?r:void 0},Mt=e=>{e?.unsetMeasureFunc(),e?.freeRecursive()},et=Wt,Ct,D=Xe({getRootHostContext:()=>({isInsideText:!1}),prepareForCommit:()=>null,preparePortalMount:()=>null,clearContainer:()=>!1,resetAfterCommit(e){if(typeof e.onComputeLayout=="function"&&e.onComputeLayout(),e.isStaticDirty){e.isStaticDirty=!1,typeof e.onImmediateRender=="function"&&e.onImmediateRender();return}typeof e.onRender=="function"&&e.onRender()},getChildHostContext(e,t){let r=e.isInsideText,o=t==="ink-text"||t==="ink-virtual-text";return r===o?e:{isInsideText:o}},shouldSetTextContent:()=>!1,createInstance(e,t,r,o){if(o.isInsideText&&e==="ink-box")throw new Error("<Box> can\u2019t be nested inside <Text> component");let i=e==="ink-text"&&o.isInsideText?"ink-virtual-text":e,s=Z(i);for(let[n,a]of Object.entries(t))if(n!=="children"){if(n==="style"){Et(s,a),s.yogaNode&&bt(s.yogaNode,a);continue}if(n==="internal_transform"){s.internal_transform=a;continue}if(n==="internal_static"){Ct=r,s.internal_static=!0,r.isStaticDirty=!0,r.staticNode=s;continue}xt(s,n,a)}return s},createTextInstance(e,t,r){if(!r.isInsideText)throw new Error(`Text string "${e}" must be rendered inside <Text> component`);return Dt(e)},resetTextContent(){},hideTextInstance(e){V(e,"")},unhideTextInstance(e,t){V(e,t)},getPublicInstance:e=>e,hideInstance(e){e.yogaNode?.setDisplay(Pt.DISPLAY_NONE)},unhideInstance(e){e.yogaNode?.setDisplay(Pt.DISPLAY_FLEX)},appendInitialChild:q,appendChild:q,insertBefore:gt,finalizeInitialChildren(){return!1},isPrimaryRenderer:!0,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},getInstanceFromNode:()=>null,prepareScopeUpdate(){},getInstanceFromScope:()=>null,appendChildToContainer:q,insertInContainerBefore:gt,removeChildFromContainer(e,t){U(e,t),Mt(t.yogaNode)},commitUpdate(e,t,r,o){Ct&&e.internal_static&&(Ct.isStaticDirty=!0);let i=At(r,o),s=At(r.style,o.style);if(!(!i&&!s)){if(i)for(let[n,a]of Object.entries(i)){if(n==="style"){Et(e,a);continue}if(n==="internal_transform"){e.internal_transform=a;continue}if(n==="internal_static"){e.internal_static=!0;continue}xt(e,n,a)}s&&e.yogaNode&&bt(e.yogaNode,s)}},commitTextUpdate(e,t,r){V(e,r)},removeChild(e,t){U(e,t),Mt(t.yogaNode)},setCurrentUpdatePriority(e){et=e},getCurrentUpdatePriority:()=>et,resolveUpdatePriority(){return et!==Wt?et:ze},maySuspendCommit(){return!1},NotPendingTransition:void 0,HostTransitionContext:je(null),resetFormInstance(){},requestPostPaintCallback(){},shouldAttemptEagerTransition(){return!1},trackSchedulerEvent(){},resolveEventType(){return null},resolveEventTimeStamp(){return-1.1},preloadInstance(){return!0},startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady(){return null}});import lr from"widest-line";import ur from"indent-string";import x from"yoga-layout";import rt from"yoga-layout";var Je=e=>e.getComputedWidth()-e.getComputedPadding(rt.EDGE_LEFT)-e.getComputedPadding(rt.EDGE_RIGHT)-e.getComputedBorder(rt.EDGE_LEFT)-e.getComputedBorder(rt.EDGE_RIGHT),Ht=Je;import tr from"cli-boxes";import ot from"chalk";import F from"chalk";var Ke=/^rgb\(\s?(\d+),\s?(\d+),\s?(\d+)\s?\)$/,Ze=/^ansi256\(\s?(\d+)\s?\)$/,qe=e=>e in F,Qe=(e,t,r)=>{if(!t)return e;if(qe(t)){if(r==="foreground")return F[t](e);let o=`bg${t[0].toUpperCase()+t.slice(1)}`;return F[o](e)}if(t.startsWith("#"))return r==="foreground"?F.hex(t)(e):F.bgHex(t)(e);if(t.startsWith("ansi256")){let o=Ze.exec(t);if(!o)return e;let i=Number(o[1]);return r==="foreground"?F.ansi256(i)(e):F.bgAnsi256(i)(e)}if(t.startsWith("rgb")){let o=Ke.exec(t);if(!o)return e;let i=Number(o[1]),s=Number(o[2]),n=Number(o[3]);return r==="foreground"?F.rgb(i,s,n)(e):F.bgRgb(i,s,n)(e)}return e},w=Qe;var er=(e,t,r,o)=>{if(r.style.borderStyle){let i=r.yogaNode.getComputedWidth(),s=r.yogaNode.getComputedHeight(),n=typeof r.style.borderStyle=="string"?tr[r.style.borderStyle]:r.style.borderStyle,a=r.style.borderTopColor??r.style.borderColor,l=r.style.borderBottomColor??r.style.borderColor,f=r.style.borderLeftColor??r.style.borderColor,c=r.style.borderRightColor??r.style.borderColor,p=r.style.borderTopDimColor??r.style.borderDimColor,g=r.style.borderBottomDimColor??r.style.borderDimColor,E=r.style.borderLeftDimColor??r.style.borderDimColor,y=r.style.borderRightDimColor??r.style.borderDimColor,b=r.style.borderTop!==!1,d=r.style.borderBottom!==!1,m=r.style.borderLeft!==!1,C=r.style.borderRight!==!1,v=i-(m?1:0)-(C?1:0),S=b?w((m?n.topLeft:"")+n.top.repeat(v)+(C?n.topRight:""),a,"foreground"):void 0;b&&p&&(S=ot.dim(S));let R=s;b&&(R-=1),d&&(R-=1);let L=(w(n.left,f,"foreground")+`
`).repeat(R);E&&(L=ot.dim(L));let O=(w(n.right,c,"foreground")+`
`).repeat(R);y&&(O=ot.dim(O));let B=d?w((m?n.bottomLeft:"")+n.bottom.repeat(v)+(C?n.bottomRight:""),l,"foreground"):void 0;d&&g&&(B=ot.dim(B));let k=b?1:0;S&&o.write(e,t,S,{transformers:[]}),m&&o.write(e,t+k,L,{transformers:[]}),C&&o.write(e+i-1,t+k,O,{transformers:[]}),B&&o.write(e,t+s-1,B,{transformers:[]})}},Gt=er;var rr=(e,t,r,o)=>{if(!r.style.backgroundColor)return;let i=r.yogaNode.getComputedWidth(),s=r.yogaNode.getComputedHeight(),n=r.style.borderStyle&&r.style.borderLeft!==!1?1:0,a=r.style.borderStyle&&r.style.borderRight!==!1?1:0,l=r.style.borderStyle&&r.style.borderTop!==!1?1:0,f=r.style.borderStyle&&r.style.borderBottom!==!1?1:0,c=i-n-a,p=s-l-f;if(!(c>0&&p>0))return;let g=w(" ".repeat(c),r.style.backgroundColor,"background");for(let E=0;E<p;E++)o.write(e+n,t+l+E,g,{transformers:[]})},Yt=rr;import _ from"yoga-layout";import it from"yoga-layout";function Ut(e){let{yogaNode:t}=e;if(!t)return 0;let r=t.getComputedHeight()-t.getComputedBorder(it.EDGE_TOP)-t.getComputedBorder(it.EDGE_BOTTOM),o=$(e),{scrollTop:i}=e.style;return typeof i!="number"&&(i=0),Math.max(0,Math.min(i,o-r))}function Vt(e){let{yogaNode:t}=e;if(!t)return 0;let r=t.getComputedWidth()-t.getComputedBorder(it.EDGE_LEFT)-t.getComputedBorder(it.EDGE_RIGHT),o=X(e),i=e.style.scrollLeft??0;return Math.max(0,Math.min(i,o-r))}var or=e=>({width:e.yogaNode?.getComputedWidth()??0,height:e.yogaNode?.getComputedHeight()??0}),ir=e=>{let{yogaNode:t}=e;if(!t)return 0;let r=t.getComputedWidth()??0,o=t.getComputedBorder(_.EDGE_LEFT),i=t.getComputedBorder(_.EDGE_RIGHT);return r-o-i},nr=e=>{let{yogaNode:t}=e;if(!t)return 0;let r=t.getComputedHeight()??0,o=t.getComputedBorder(_.EDGE_TOP),i=t.getComputedBorder(_.EDGE_BOTTOM);return r-o-i},sr=e=>{let{yogaNode:t}=e;if(!t)return{x:0,y:0,width:0,height:0};let r=t.getComputedWidth()??0,o=t.getComputedHeight()??0,i=t.getComputedLeft(),s=t.getComputedTop(),n=e.parentNode;for(;n?.yogaNode;){if(i+=n.yogaNode.getComputedLeft(),s+=n.yogaNode.getComputedTop(),n.nodeName==="ink-box"){let a=n.style.overflow??"visible",l=n.style.overflowX??a;(n.style.overflowY??a)==="scroll"&&(s-=Ut(n)),l==="scroll"&&(i-=Vt(n))}n=n.parentNode}return{x:i,y:s,width:r,height:o}},$=e=>{let{yogaNode:t}=e;if(!t)return 0;let r=t.getComputedBorder(_.EDGE_TOP),o=r;for(let i=0;i<t.getChildCount();i++){let s=t.getChild(i),n=s.getComputedTop()+s.getComputedHeight()+s.getComputedMargin(_.EDGE_BOTTOM);n>o&&(o=n)}return o-r+t.getComputedPadding(_.EDGE_BOTTOM)},X=e=>{let{yogaNode:t}=e;if(!t)return 0;let r=t.getComputedBorder(_.EDGE_LEFT),o=t.getComputedPadding(_.EDGE_LEFT);for(let i=0;i<t.getChildCount();i++){let s=t.getChild(i),n=s.getComputedLeft()+s.getComputedWidth()+s.getComputedMargin(_.EDGE_RIGHT);n>o&&(o=n)}return o-r+t.getComputedPadding(_.EDGE_RIGHT)},ar=or;var cr=(e,t)=>{let r=e.childNodes[0]?.yogaNode;if(r){let o=r.getComputedLeft(),i=r.getComputedTop();t=`
`.repeat(i)+ur(t,o)}return t},nt=(e,t={})=>{if(t.skipStaticElements&&e.internal_static||e.yogaNode?.getDisplay()===x.DISPLAY_NONE)return"";let r="";if(e.nodeName==="ink-text")r=Y(e);else if(e.nodeName==="ink-box"||e.nodeName==="ink-root"){let o=e.style.flexDirection==="row"||e.style.flexDirection==="row-reverse"?" ":`
`;r=(e.style.flexDirection==="row-reverse"||e.style.flexDirection==="column-reverse"?[...e.childNodes].reverse():[...e.childNodes]).map(s=>nt(s,{parentRole:e.internal_accessibility?.role,skipStaticElements:t.skipStaticElements})).filter(Boolean).join(o)}if(e.internal_accessibility){let{role:o,state:i}=e.internal_accessibility;if(i){let n=Object.keys(i).filter(a=>i[a]).join(", ");n&&(r=`(${n}) ${r}`)}o&&o!==t.parentRole&&(r=`${o}: ${r}`)}return r},$t=(e,t,r)=>{let{offsetX:o=0,offsetY:i=0,transformers:s=[],skipStaticElements:n}=r;if(n&&e.internal_static)return;let{yogaNode:a}=e;if(a){if(a.getDisplay()===x.DISPLAY_NONE)return;let l=o+a.getComputedLeft(),f=i+a.getComputedTop(),c=s;if(typeof e.internal_transform=="function"&&(c=[e.internal_transform,...s]),e.nodeName==="ink-text"){let m=Y(e);if(m.length>0){let C=lr(m),v=Ht(a);if(C>v){let S=e.style.textWrap??"wrap";m=K(m,v,S)}m=cr(e,m),t.write(l,f,m,{transformers:c})}return}let p=!1,g=f,E=l,y=!1,b=!1,d=!1;if(e.nodeName==="ink-box"){Yt(l,f,e,t),Gt(l,f,e,t);let m=e.style.overflow??"visible",C=e.style.overflowX??m,v=e.style.overflowY??m;y=v==="scroll",b=C==="scroll",y&&(fr(e),g-=e.internal_scrollTop??0),b&&(dr(e),E-=e.internal_scrollLeft??0),d=y&&(e.internal_scrollHeight??0)>(e.internal_clientHeight??0);let S=C==="hidden"||C==="scroll",R=v==="hidden"||v==="scroll";if(S||R){let L=S?l+a.getComputedBorder(x.EDGE_LEFT):void 0,O=S?l+a.getComputedWidth()-a.getComputedBorder(x.EDGE_RIGHT):void 0,B=R?f+a.getComputedBorder(x.EDGE_TOP):void 0,k=R?f+a.getComputedHeight()-a.getComputedBorder(x.EDGE_BOTTOM):void 0;t.clip({x1:L,x2:O,y1:B,y2:k}),p=!0}}if(e.nodeName==="ink-root"||e.nodeName==="ink-box"){for(let m of e.childNodes)$t(m,t,{offsetX:E,offsetY:g,transformers:c,skipStaticElements:n});p&&t.unclip(),e.nodeName==="ink-box"&&(y&&pr(e,l,f,t),b&&mr(e,l,f,t,{verticallyScrollable:d}))}}};function fr(e){let{yogaNode:t}=e;if(!t)return;let r=t.getComputedHeight()-t.getComputedBorder(x.EDGE_TOP)-t.getComputedBorder(x.EDGE_BOTTOM),o=$(e),i=Math.max(0,Math.min(e.style.scrollTop??0,o-r));e.internal_scrollTop=i,e.internal_scrollHeight=o,e.internal_clientHeight=r}function dr(e){let{yogaNode:t}=e;if(!t)return;let r=t.getComputedWidth()-t.getComputedBorder(x.EDGE_LEFT)-t.getComputedBorder(x.EDGE_RIGHT),o=X(e),i=e.style.scrollLeft??0;i=Math.max(0,Math.min(i,o-r)),e.internal_scrollLeft=i,e.internal_scrollWidth=o,e.internal_clientWidth=r}function Xt(e,t,r,o,i,s={}){let{yogaNode:n}=e;if(!n)return;let a=i==="vertical"?e.internal_clientHeight??0:e.internal_clientWidth??0,l=i==="vertical"?e.internal_scrollHeight??0:e.internal_scrollWidth??0,f=i==="vertical"?e.internal_scrollTop??0:e.internal_scrollLeft??0;if(l<=a)return;let c=i==="vertical"?t+n.getComputedWidth()-1-n.getComputedBorder(x.EDGE_RIGHT):t+n.getComputedBorder(x.EDGE_LEFT),p=i==="vertical"?r+n.getComputedBorder(x.EDGE_TOP):r+n.getComputedHeight()-1-n.getComputedBorder(x.EDGE_BOTTOM),g=i==="vertical"?n.getComputedHeight()-n.getComputedBorder(x.EDGE_TOP)-n.getComputedBorder(x.EDGE_BOTTOM):n.getComputedWidth()-n.getComputedBorder(x.EDGE_LEFT)-n.getComputedBorder(x.EDGE_RIGHT)-(s.verticallyScrollable?1:0);if(g<=0)return;let E=g*2,y=Math.max(i==="vertical"?2:1,Math.round(a/l*E)),b=l-a,d=E-y,m=b>0?Math.round(f/b*d):0,C=e.style.scrollbarThumbColor,v=m,S=m+y,R=Math.floor(v/2),L=Math.min(g,Math.ceil(S/2));for(let O=R;O<L;O++){let B=O*2,k=(O+1)*2,pt=Math.max(B,v),mt=Math.min(k,S)-pt;if(mt>0){let Se=i==="vertical"?mt===2?"\u2588":pt%2===0?"\u2580":"\u2584":mt===2?"\u2588":pt%2===0?"\u258C":"\u2590",we=i==="vertical"?c:c+O,Te=i==="vertical"?p+O:p;o.write(we,Te,w(w(Se,C,"foreground"),e.style.backgroundColor,"background"),{transformers:[]})}}}function pr(e,t,r,o){Xt(e,t,r,o,"vertical")}function mr(e,t,r,o,{verticallyScrollable:i}){Xt(e,t,r,o,"horizontal",{verticallyScrollable:i})}var yt=$t;import hr from"slice-ansi";import zt from"string-width";import gr from"widest-line";import{styledCharsFromTokens as xr,styledCharsToString as Er,tokenize as br}from"@alcalzone/ansi-tokenize";var P=class{width;height;operations=[];constructor(t){let{width:r,height:o}=t;this.width=r,this.height=o}write(t,r,o,i){let{transformers:s}=i;o&&this.operations.push({type:"write",x:t,y:r,text:o,transformers:s})}clip(t){this.operations.push({type:"clip",clip:t})}unclip(){this.operations.push({type:"unclip"})}get(){let t=[];for(let i=0;i<this.height;i++){let s=[];for(let n=0;n<this.width;n++)s.push({type:"char",value:" ",fullWidth:!1,styles:[]});t.push(s)}let r=[];for(let i of this.operations){if(i.type==="clip"){let s=r.at(-1),n={...i.clip};s&&(n.x1=s.x1===void 0?n.x1:n.x1===void 0?s.x1:Math.max(s.x1,n.x1),n.x2=s.x2===void 0?n.x2:n.x2===void 0?s.x2:Math.min(s.x2,n.x2),n.y1=s.y1===void 0?n.y1:n.y1===void 0?s.y1:Math.max(s.y1,n.y1),n.y2=s.y2===void 0?n.y2:n.y2===void 0?s.y2:Math.min(s.y2,n.y2)),r.push(n);continue}if(i.type==="unclip"){r.pop();continue}i.type==="write"&&this.applyWriteOperation(t,r,i)}return{output:t.map(i=>{let s=i.filter(n=>n!==void 0);return Er(s).trimEnd()}).join(`
`),height:t.length}}applyWriteOperation(t,r,o){let{text:i,transformers:s}=o,{x:n,y:a}=o,l=i.split(`
`),f=r.at(-1);if(f){let p=this.clipText(l,n,a,f);if(!p)return;l=p.lines,n=p.x,a=p.y}let c=0;for(let[p,g]of l.entries()){let E=t[a+c];if(!E)continue;for(let d of s)g=d(g,p);let y=xr(br(g)),b=n;for(let d of y){E[b]=d;let m=Math.max(1,zt(d.value));if(m>1)for(let C=1;C<m;C++)E[b+C]={type:"char",value:"",fullWidth:!1,styles:d.styles};b+=m}c++}}clipText(t,r,o,i){let s=typeof i?.x1=="number"&&typeof i?.x2=="number",n=typeof i?.y1=="number"&&typeof i?.y2=="number";if(s){let a=gr(t.join(`
`));if(r+a<i.x1||r>i.x2)return}if(n){let a=t.length;if(o+a<i.y1||o>i.y2)return}if(s&&(t=t.map(a=>{let l=r<i.x1?i.x1-r:0,f=zt(a),c=r+f>i.x2?i.x2-r:f;return hr(a,l,c)}),r<i.x1&&(r=i.x1)),n){let a=o<i.y1?i.y1-o:0,l=t.length,f=o+l>i.y2?i.y2-o:l;t=t.slice(a,f),o<i.y1&&(o=i.y1)}return{lines:t,x:r,y:o}}};var Cr=(e,t)=>{if(e.yogaNode){if(t){let n=nt(e,{skipStaticElements:!0}),a=n===""?0:n.split(`
`).length,l="";return e.staticNode&&(l=nt(e.staticNode,{skipStaticElements:!1})),{output:n,outputHeight:a,staticOutput:l?`${l}
`:""}}let r=new P({width:e.yogaNode.getComputedWidth(),height:e.yogaNode.getComputedHeight()});yt(e,r,{skipStaticElements:!0});let o;e.staticNode?.yogaNode&&(o=new P({width:e.staticNode.yogaNode.getComputedWidth(),height:e.staticNode.yogaNode.getComputedHeight()}),yt(e.staticNode,o,{skipStaticElements:!1}));let{output:i,height:s}=r.get();return{output:i,outputHeight:s,staticOutput:o?`${o.get().output}
`:""}}return{output:"",outputHeight:0,staticOutput:""}},jt=Cr;import Jt from"ansi-escapes";import Kt from"cli-cursor";var yr=(e,{showCursor:t=!1}={})=>{let r=0,o="",i=!1,s=n=>{!t&&!i&&(Kt.hide(),i=!0);let a=n+`
`;a!==o&&(o=a,e.write(Jt.eraseLines(r)+a),r=a.split(`
`).length)};return s.clear=()=>{e.write(Jt.eraseLines(r)),o="",r=0},s.done=()=>{o="",r=0,t||(Kt.show(),i=!1)},s.sync=n=>{let a=n+`
`;o=a,r=a.split(`
`).length},s},Sr={create:yr},Zt=Sr;var wr=new WeakMap,A=wr;import{EventEmitter as Wr}from"node:events";import Hr from"node:process";import H,{PureComponent as Gr}from"react";import le from"cli-cursor";import{createContext as Tr}from"react";var qt=Tr({exit(){}});qt.displayName="InternalAppContext";var st=qt;import{EventEmitter as Nr}from"node:events";import vr from"node:process";import{createContext as Or}from"react";var Qt=Or({stdin:vr.stdin,internal_eventEmitter:new Nr,setRawMode(){},isRawModeSupported:!1,internal_exitOnCtrlC:!0});Qt.displayName="InternalStdinContext";var at=Qt;import _r from"node:process";import{createContext as Rr}from"react";var te=Rr({stdout:_r.stdout,write(){}});te.displayName="InternalStdoutContext";var lt=te;import Ir from"node:process";import{createContext as Dr}from"react";var ee=Dr({stderr:Ir.stderr,write(){}});ee.displayName="InternalStderrContext";var ut=ee;import{createContext as Fr}from"react";var re=Fr({activeId:void 0,add(){},remove(){},activate(){},deactivate(){},enableFocus(){},disableFocus(){},focusNext(){},focusPrevious(){},focus(){}});re.displayName="InternalFocusContext";var M=re;import*as ft from"node:fs";import{cwd as ae}from"node:process";import h from"react";import ne from"stack-utils";import Mr from"code-excerpt";import St,{forwardRef as kr,useContext as Pr}from"react";import{createContext as Br}from"react";var I=Br({isScreenReaderEnabled:!1});import{createContext as Lr}from"react";var ct=Lr(void 0);var oe=kr(({children:e,backgroundColor:t,"aria-label":r,"aria-hidden":o,"aria-role":i,"aria-state":s,...n},a)=>{let{isScreenReaderEnabled:l}=Pr(I),f=r?St.createElement("ink-text",null,r):void 0;if(l&&o)return null;let c=St.createElement("ink-box",{ref:a,style:{flexWrap:"nowrap",flexDirection:"row",flexGrow:0,flexShrink:1,...n,backgroundColor:t,overflowX:n.overflowX??n.overflow??"visible",overflowY:n.overflowY??n.overflow??"visible"},internal_accessibility:{role:i,state:s}},l&&f?f:e);return t?St.createElement(ct.Provider,{value:t},c):c});oe.displayName="Box";var T=oe;import Ar,{useContext as ie}from"react";import W from"chalk";function N({color:e,backgroundColor:t,dimColor:r=!1,bold:o=!1,italic:i=!1,underline:s=!1,strikethrough:n=!1,inverse:a=!1,wrap:l="wrap",children:f,"aria-label":c,"aria-hidden":p=!1}){let{isScreenReaderEnabled:g}=ie(I),E=ie(ct),y=g&&c?c:f;if(y==null)return null;let b=d=>{r&&(d=W.dim(d)),e&&(d=w(d,e,"foreground"));let m=t??E;return m&&(d=w(d,m,"background")),o&&(d=W.bold(d)),i&&(d=W.italic(d)),s&&(d=W.underline(d)),n&&(d=W.strikethrough(d)),a&&(d=W.inverse(d)),d};return g&&p?null:Ar.createElement("ink-text",{style:{flexGrow:0,flexShrink:1,flexDirection:"row",textWrap:l},internal_transform:b},g&&c?c:f)}var wt=e=>e?.replace(`file://${ae()}/`,""),se=new ne({cwd:ae(),internals:ne.nodeInternals()});function Tt({error:e}){let t=e.stack?e.stack.split(`
`).slice(1):void 0,r=t?se.parseLine(t[0]):void 0,o=wt(r?.file),i,s=0;if(o&&r?.line&&ft.existsSync(o)){let n=ft.readFileSync(o,"utf8");if(i=Mr(n,r.line),i)for(let{line:a}of i)s=Math.max(s,String(a).length)}return h.createElement(T,{flexDirection:"column",padding:1},h.createElement(T,null,h.createElement(N,{backgroundColor:"red",color:"white"}," ","ERROR"," "),h.createElement(N,null," ",e.message)),r&&o&&h.createElement(T,{marginTop:1},h.createElement(N,{dimColor:!0},o,":",r.line,":",r.column)),r&&i&&h.createElement(T,{marginTop:1,flexDirection:"column"},i.map(({line:n,value:a})=>h.createElement(T,{key:n},h.createElement(T,{width:s+1},h.createElement(N,{dimColor:n!==r.line,backgroundColor:n===r.line?"red":void 0,color:n===r.line?"white":void 0,"aria-label":n===r.line?`Line ${n}, error`:`Line ${n}`},String(n).padStart(s," "),":")),h.createElement(N,{key:n,backgroundColor:n===r.line?"red":void 0,color:n===r.line?"white":void 0}," "+a)))),e.stack&&h.createElement(T,{marginTop:1,flexDirection:"column"},e.stack.split(`
`).slice(1).map(n=>{let a=se.parseLine(n);return a?h.createElement(T,{key:n},h.createElement(N,{dimColor:!0},"- "),h.createElement(N,{dimColor:!0,bold:!0},a.function),h.createElement(N,{dimColor:!0,color:"gray","aria-label":`at ${wt(a.file)??""} line ${a.line} column ${a.column}`}," ","(",wt(a.file)??"",":",a.line,":",a.column,")")):h.createElement(T,{key:n},h.createElement(N,{dimColor:!0},"- "),h.createElement(N,{dimColor:!0,bold:!0},n,"\\t"," "))})))}var Yr="	",Ur="\x1B[Z",Vr="\x1B",z=class extends Gr{static displayName="InternalApp";static getDerivedStateFromError(t){return{error:t}}state={isFocusEnabled:!0,activeFocusId:void 0,focusables:[],error:void 0};rawModeEnabledCount=0;internal_eventEmitter=new Wr;isRawModeSupported(){return this.props.stdin.isTTY}render(){return H.createElement(st.Provider,{value:{exit:this.handleExit}},H.createElement(at.Provider,{value:{stdin:this.props.stdin,setRawMode:this.handleSetRawMode,isRawModeSupported:this.isRawModeSupported(),internal_exitOnCtrlC:this.props.exitOnCtrlC,internal_eventEmitter:this.internal_eventEmitter}},H.createElement(lt.Provider,{value:{stdout:this.props.stdout,write:this.props.writeToStdout}},H.createElement(ut.Provider,{value:{stderr:this.props.stderr,write:this.props.writeToStderr}},H.createElement(M.Provider,{value:{activeId:this.state.activeFocusId,add:this.addFocusable,remove:this.removeFocusable,activate:this.activateFocusable,deactivate:this.deactivateFocusable,enableFocus:this.enableFocus,disableFocus:this.disableFocus,focusNext:this.focusNext,focusPrevious:this.focusPrevious,focus:this.focus}},this.state.error?H.createElement(Tt,{error:this.state.error}):this.props.children)))))}componentDidMount(){le.hide(this.props.stdout)}componentWillUnmount(){le.show(this.props.stdout),this.isRawModeSupported()&&this.handleSetRawMode(!1)}componentDidCatch(t){this.handleExit(t)}handleSetRawMode=t=>{let{stdin:r}=this.props;if(!this.isRawModeSupported())throw r===Hr.stdin?new Error(`Raw mode is not supported on the current process.stdin, which Ink uses as input stream by default.
Read about how to prevent this error on https://github.com/vadimdemedes/ink/#israwmodesupported`):new Error(`Raw mode is not supported on the stdin provided to Ink.
Read about how to prevent this error on https://github.com/vadimdemedes/ink/#israwmodesupported`);if(r.setEncoding("utf8"),t){this.rawModeEnabledCount===0&&(r.ref(),r.setRawMode(!0),r.addListener("readable",this.handleReadable)),this.rawModeEnabledCount++;return}--this.rawModeEnabledCount===0&&(r.setRawMode(!1),r.removeListener("readable",this.handleReadable),r.unref())};handleReadable=()=>{let t;for(;(t=this.props.stdin.read())!==null;)this.handleInput(t),this.internal_eventEmitter.emit("input",t)};handleInput=t=>{t===""&&this.props.exitOnCtrlC&&this.handleExit(),t===Vr&&this.state.activeFocusId&&this.setState({activeFocusId:void 0}),this.state.isFocusEnabled&&this.state.focusables.length>0&&(t===Yr&&this.focusNext(),t===Ur&&this.focusPrevious())};handleExit=t=>{this.isRawModeSupported()&&this.handleSetRawMode(!1),this.props.onExit(t)};enableFocus=()=>{this.setState({isFocusEnabled:!0})};disableFocus=()=>{this.setState({isFocusEnabled:!1})};focus=t=>{this.setState(r=>r.focusables.some(i=>i?.id===t)?{activeFocusId:t}:r)};focusNext=()=>{this.setState(t=>{let r=t.focusables.find(i=>i.isActive)?.id;return{activeFocusId:this.findNextFocusable(t)??r}})};focusPrevious=()=>{this.setState(t=>{let r=t.focusables.findLast(i=>i.isActive)?.id;return{activeFocusId:this.findPreviousFocusable(t)??r}})};addFocusable=(t,{autoFocus:r})=>{this.setState(o=>{let i=o.activeFocusId;return!i&&r&&(i=t),{activeFocusId:i,focusables:[...o.focusables,{id:t,isActive:!0}]}})};removeFocusable=t=>{this.setState(r=>({activeFocusId:r.activeFocusId===t?void 0:r.activeFocusId,focusables:r.focusables.filter(o=>o.id!==t)}))};activateFocusable=t=>{this.setState(r=>({focusables:r.focusables.map(o=>o.id!==t?o:{id:t,isActive:!0})}))};deactivateFocusable=t=>{this.setState(r=>({activeFocusId:r.activeFocusId===t?void 0:r.activeFocusId,focusables:r.focusables.map(o=>o.id!==t?o:{id:t,isActive:!1})}))};findNextFocusable=t=>{let r=t.focusables.findIndex(o=>o.id===t.activeFocusId);for(let o=r+1;o<t.focusables.length;o++){let i=t.focusables[o];if(i?.isActive)return i.id}};findPreviousFocusable=t=>{let r=t.focusables.findIndex(o=>o.id===t.activeFocusId);for(let o=r-1;o>=0;o--){let i=t.focusables[o];if(i?.isActive)return i.id}}};var de=()=>{},j=class{options;log;throttledLog;isScreenReaderEnabled;isUnmounted;lastOutput;lastOutputHeight;container;rootNode;fullStaticOutput;exitPromise;restoreConsole;unsubscribeResize;constructor(t){$r(this),this.options=t,this.rootNode=Z("ink-root"),this.rootNode.onComputeLayout=this.calculateLayout,this.isScreenReaderEnabled=t.isScreenReaderEnabled??ue.env.INK_SCREEN_READER==="true";let r=t.debug||this.isScreenReaderEnabled,o=t.maxFps??30,i=o>0?Math.max(1,Math.ceil(1e3/o)):0;this.rootNode.onRender=r?this.onRender:fe(this.onRender,i,{leading:!0,trailing:!0}),this.rootNode.onImmediateRender=this.onRender,this.log=Zt.create(t.stdout),this.throttledLog=r?this.log:fe(this.log,void 0,{leading:!0,trailing:!0}),this.isUnmounted=!1,this.lastOutput="",this.lastOutputHeight=0,this.fullStaticOutput="",this.container=D.createContainer(this.rootNode,jr,null,!1,null,"id",()=>{},()=>{},()=>{},()=>{},null),this.unsubscribeExit=Xr(this.unmount,{alwaysLast:!1}),ue.env.DEV==="true"&&D.injectIntoDevTools({bundleType:0,version:"16.13.1",rendererPackageName:"ink"}),t.patchConsole&&this.patchConsole(),G||(t.stdout.on("resize",this.resized),this.unsubscribeResize=()=>{t.stdout.off("resize",this.resized)})}resized=()=>{this.calculateLayout(),this.onRender()};resolveExitPromise=()=>{};rejectExitPromise=()=>{};unsubscribeExit=()=>{};calculateLayout=()=>{let t=this.options.stdout.columns||80;this.rootNode.yogaNode.setWidth(t),this.rootNode.yogaNode.calculateLayout(void 0,void 0,Jr.DIRECTION_LTR)};onRender=()=>{if(this.isUnmounted)return;let{output:t,outputHeight:r,staticOutput:o}=jt(this.rootNode,this.isScreenReaderEnabled),i=o&&o!==`
`;if(this.options.debug){i&&(this.fullStaticOutput+=o),this.options.stdout.write(this.fullStaticOutput+t);return}if(G){i&&this.options.stdout.write(o),this.lastOutput=t,this.lastOutputHeight=r;return}if(this.isScreenReaderEnabled){if(i){let a=this.lastOutputHeight>0?Nt.eraseLines(this.lastOutputHeight):"";this.options.stdout.write(a+o),this.lastOutputHeight=0}if(t===this.lastOutput&&!i)return;let s=this.options.stdout.columns||80,n=Kr(t,s,{trim:!1,hard:!0});if(i)this.options.stdout.write(n);else{let a=this.lastOutputHeight>0?Nt.eraseLines(this.lastOutputHeight):"";this.options.stdout.write(a+n)}this.lastOutput=t,this.lastOutputHeight=n===""?0:n.split(`
`).length;return}if(i&&(this.fullStaticOutput+=o),this.lastOutputHeight>=this.options.stdout.rows){this.options.stdout.write(Nt.clearTerminal+this.fullStaticOutput+t),this.lastOutput=t,this.lastOutputHeight=r,this.log.sync(t);return}i&&(this.log.clear(),this.options.stdout.write(o),this.log(t)),!i&&t!==this.lastOutput&&this.throttledLog(t),this.lastOutput=t,this.lastOutputHeight=r};render(t){let r=ce.createElement(I.Provider,{value:{isScreenReaderEnabled:this.isScreenReaderEnabled}},ce.createElement(z,{stdin:this.options.stdin,stdout:this.options.stdout,stderr:this.options.stderr,writeToStdout:this.writeToStdout,writeToStderr:this.writeToStderr,exitOnCtrlC:this.options.exitOnCtrlC,onExit:this.unmount},t)),o=Date.now();if(D.updateContainerSync(r,this.container,null,de),D.flushSyncWork(),this.options.onRender){let i=Date.now();this.options.onRender(i-o)}}writeToStdout(t){if(!this.isUnmounted){if(this.options.debug){this.options.stdout.write(t+this.fullStaticOutput+this.lastOutput);return}if(G){this.options.stdout.write(t);return}this.log.clear(),this.options.stdout.write(t),this.log(this.lastOutput)}}writeToStderr(t){if(!this.isUnmounted){if(this.options.debug){this.options.stderr.write(t),this.options.stdout.write(this.fullStaticOutput+this.lastOutput);return}if(G){this.options.stderr.write(t);return}this.log.clear(),this.options.stderr.write(t),this.log(this.lastOutput)}}unmount(t){this.isUnmounted||(this.calculateLayout(),this.onRender(),this.unsubscribeExit(),typeof this.restoreConsole=="function"&&this.restoreConsole(),typeof this.unsubscribeResize=="function"&&this.unsubscribeResize(),G?this.options.stdout.write(this.lastOutput+`
`):this.options.debug||this.log.done(),this.isUnmounted=!0,D.updateContainerSync(null,this.container,null,de),D.flushSyncWork(),A.delete(this.options.stdout),t instanceof Error?this.rejectExitPromise(t):this.resolveExitPromise())}async waitUntilExit(){return this.exitPromise||=new Promise((t,r)=>{this.resolveExitPromise=t,this.rejectExitPromise=r}),this.exitPromise}clear(){!G&&!this.options.debug&&this.log.clear()}patchConsole(){this.options.debug||(this.restoreConsole=zr((t,r)=>{t==="stdout"&&this.writeToStdout(r),t==="stderr"&&(r.startsWith("The above error occurred")||this.writeToStderr(r))}))}};var qr=(e,t)=>{let r={stdout:dt.stdout,stdin:dt.stdin,stderr:dt.stderr,debug:!1,exitOnCtrlC:!0,patchConsole:!0,maxFps:30,...to(t)},o=eo(r.stdout,()=>new j(r));return o.render(e),{rerender:o.render,unmount(){o.unmount()},waitUntilExit:o.waitUntilExit,cleanup:()=>A.delete(r.stdout),clear:o.clear}},Qr=qr,to=(e={})=>e instanceof Zr?{stdout:e,stdin:dt.stdin}:e,eo=(e,t)=>{let r=A.get(e);return r||(r=t(),A.set(e,r)),r};import ro,{useMemo as pe,useState as oo,useLayoutEffect as io}from"react";function me(e){let{items:t,children:r,style:o}=e,[i,s]=oo(0),n=pe(()=>t.slice(i),[t,i]);io(()=>{s(t.length)},[t.length]);let a=n.map((f,c)=>r(f,i+c)),l=pe(()=>({position:"absolute",flexDirection:"column",...o}),[o]);return ro.createElement("ink-box",{internal_static:!0,style:l},a)}import no,{useContext as so}from"react";function he({children:e,transform:t,accessibilityLabel:r}){let{isScreenReaderEnabled:o}=so(I);return e==null?null:no.createElement("ink-text",{style:{flexGrow:0,flexShrink:1,flexDirection:"row"},internal_transform:t},o&&r?r:e)}import ao from"react";function ge({count:e=1}){return ao.createElement("ink-text",null,`
`.repeat(e))}import lo from"react";function xe(){return lo.createElement(T,{flexGrow:1})}import{useEffect as ye}from"react";import{Buffer as uo}from"node:buffer";var co=/^(?:\x1b)([a-zA-Z0-9])$/,fo=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/,Ee={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"},be=[...Object.values(Ee),"backspace"],po=e=>["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(e),mo=e=>["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(e),ho=(e="")=>{let t;uo.isBuffer(e)?e[0]>127&&e[1]===void 0?(e[0]-=128,e="\x1B"+String(e)):e=String(e):e!==void 0&&typeof e!="string"?e=String(e):e||(e="");let r={name:"",ctrl:!1,meta:!1,shift:!1,option:!1,sequence:e,raw:e};if(r.sequence=r.sequence||e||r.name,e==="\r")r.raw=void 0,r.name="return";else if(e===`
`)r.name="enter";else if(e==="	")r.name="tab";else if(e==="\b"||e==="\x1B\b")r.name="backspace",r.meta=e.charAt(0)==="\x1B";else if(e==="\x7F"||e==="\x1B\x7F")r.name="delete",r.meta=e.charAt(0)==="\x1B";else if(e==="\x1B"||e==="\x1B\x1B")r.name="escape",r.meta=e.length===2;else if(e===" "||e==="\x1B ")r.name="space",r.meta=e.length===2;else if(e.length===1&&e<="")r.name=String.fromCharCode(e.charCodeAt(0)+97-1),r.ctrl=!0;else if(e.length===1&&e>="0"&&e<="9")r.name="number";else if(e.length===1&&e>="a"&&e<="z")r.name=e;else if(e.length===1&&e>="A"&&e<="Z")r.name=e.toLowerCase(),r.shift=!0;else if(t=co.exec(e))r.meta=!0,r.shift=/^[A-Z]$/.test(t[1]);else if(t=fo.exec(e)){let o=[...e];o[0]==="\x1B"&&o[1]==="\x1B"&&(r.option=!0);let i=[t[1],t[2],t[4],t[6]].filter(Boolean).join(""),s=(t[3]||t[5]||1)-1;r.ctrl=!!(s&4),r.meta=!!(s&10),r.shift=!!(s&1),r.code=i,r.name=Ee[i],r.shift=po(i)||r.shift,r.ctrl=mo(i)||r.ctrl}return r},Ce=ho;import{useContext as go}from"react";var xo=()=>go(at),J=xo;var Eo=(e,t={})=>{let{stdin:r,setRawMode:o,internal_exitOnCtrlC:i,internal_eventEmitter:s}=J();ye(()=>{if(t.isActive!==!1)return o(!0),()=>{o(!1)}},[t.isActive,o]),ye(()=>{if(t.isActive===!1)return;let n=a=>{let l=Ce(a),f={upArrow:l.name==="up",downArrow:l.name==="down",leftArrow:l.name==="left",rightArrow:l.name==="right",pageDown:l.name==="pagedown",pageUp:l.name==="pageup",return:l.name==="return",escape:l.name==="escape",ctrl:l.ctrl,shift:l.shift,tab:l.name==="tab",backspace:l.name==="backspace",delete:l.name==="delete",meta:l.meta||l.name==="escape"||l.option},c=l.ctrl?l.name:l.sequence;be.includes(l.name)&&(c=""),c.startsWith("\x1B")&&(c=c.slice(1)),c.length===1&&typeof c[0]=="string"&&/[A-Z]/.test(c[0])&&(f.shift=!0),(!(c==="c"&&f.ctrl)||!i)&&D.batchedUpdates(()=>{e(c,f)})};return s?.on("input",n),()=>{s?.removeListener("input",n)}},[t.isActive,r,i,e])},bo=Eo;import{useContext as Co}from"react";var yo=()=>Co(st),So=yo;import{useContext as wo}from"react";var To=()=>wo(lt),No=To;import{useContext as vo}from"react";var Oo=()=>vo(ut),_o=Oo;import{useEffect as vt,useContext as Ro,useMemo as Io}from"react";var Do=({isActive:e=!0,autoFocus:t=!1,id:r}={})=>{let{isRawModeSupported:o,setRawMode:i}=J(),{activeId:s,add:n,remove:a,activate:l,deactivate:f,focus:c}=Ro(M),p=Io(()=>r??Math.random().toString().slice(2,7),[r]);return vt(()=>(n(p,{autoFocus:t}),()=>{a(p)}),[p,t]),vt(()=>{e?l(p):f(p)},[e,p]),vt(()=>{if(!(!o||!e))return i(!0),()=>{i(!1)}},[e]),{isFocused:!!p&&s===p,focus:c}},Fo=Do;import{useContext as Bo}from"react";var Lo=()=>{let e=Bo(M);return{enableFocus:e.enableFocus,disableFocus:e.disableFocus,focusNext:e.focusNext,focusPrevious:e.focusPrevious,focus:e.focus}},ko=Lo;import{useContext as Po}from"react";var Ao=()=>{let{isScreenReaderEnabled:e}=Po(I);return e},Mo=Ao;export{T as Box,ge as Newline,xe as Spacer,me as Static,N as Text,he as Transform,sr as getBoundingBox,nr as getInnerHeight,ir as getInnerWidth,$ as getScrollHeight,X as getScrollWidth,ar as measureElement,Qr as render,So as useApp,Fo as useFocus,ko as useFocusManager,bo as useInput,Mo as useIsScreenReaderEnabled,_o as useStderr,J as useStdin,No as useStdout};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
